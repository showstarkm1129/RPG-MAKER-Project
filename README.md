# RPG Maker MZ Projects

RPG Maker MZ (RMMZ) プロジェクトの Git リポジトリです。
複数端末間での開発を前提とした構成になっています。

---

## 目次

1. [リポジトリ構成](#リポジトリ構成)
2. [Git で管理するファイル・しないファイル](#git-で管理するファイルしないファイル)
3. [複数端末で作業する際の注意点](#複数端末で作業する際の注意点)
4. [新しい端末へのセットアップ手順](#新しい端末へのセットアップ手順)
5. [日常のワークフロー](#日常のワークフロー)
6. [新規プロジェクト追加時](#新規プロジェクト追加時)
7. [RMMZ バージョン情報](#rmmz-バージョン情報)

---

## リポジトリ構成

```
RMMZ/
    .gitignore          ← 全プロジェクト共通の除外設定
    README.md           ← このファイル
    Test/               ← プロジェクト1
    Game2/              ← プロジェクト2（将来追加）
    ...
```

---

## Git で管理するファイル・しないファイル

### 追跡するファイル（Git に含まれる）

各プロジェクトフォルダ内の以下のファイルのみを追跡しています：

| パス | 内容 |
|---|---|
| `data/*.json` | ゲームデータ（マップ・アクター・アイテム・スキル等） |
| `js/plugins/*.js` | カスタムプラグイン |
| `js/plugins.js` | プラグイン設定ファイル |
| `index.html` | ゲームエントリポイント |
| `package.json` | プロジェクト設定（タイトル・画面サイズ等） |
| `game.rmmzproject` | RPGMaker プロジェクトファイル |
| `css/game.css` | スタイルシート |
| `icon/icon.png` | アプリアイコン |

### 除外するファイル（Git に含まれない）

以下の大容量バイナリファイルは除外しています：

| パス | 理由 | 補完元 |
|---|---|---|
| `audio/` | OGG音声（サイズ大） | RMMZ 同梱RTP または自前素材バックアップ |
| `img/` | PNG画像（サイズ大） | RMMZ 同梱RTP または自前素材バックアップ |
| `effects/` | Effekseerエフェクト | RMMZ 同梱RTP または自前素材バックアップ |
| `fonts/` | WOFFフォント | RMMZ インストール先からコピー |
| `movies/` | 動画ファイル | 自前素材バックアップ |
| `js/libs/` | 外部ライブラリ（Pixi.js 等） | RMMZ インストール先からコピー |
| `js/rmmz_*.js` | RMMZエンジンコア | RMMZ インストール先からコピー |
| `js/main.js` | RMMZエントリポイント | RMMZ インストール先からコピー |

---

## 複数端末で作業する際の注意点

これが最も重要なセクションです。
Git で共有できないファイルは **手動で同期** しなければなりません。

---

### ⚠️ 注意1: 素材ファイルは自分で同期する

`audio/`・`img/`・`effects/` は Git で管理されません。
**端末ごとに同じ素材が揃っていないと、ゲームが正常に動作しません。**

**対策:**
- Google Drive / Dropbox / OneDrive などのクラウドストレージで素材フォルダごと同期する
- または外付けHDDで手動コピーする
- 素材を追加・変更した場合は、もう一方の端末に反映されているか必ず確認する

```
【推奨構成の例】
Google Drive/
    RMMZ_Assets/        ← 素材の共有用フォルダ（Git 外）
        Test/
            audio/
            img/
            effects/
        Game2/
            audio/
            ...
```

---

### ⚠️ 注意2: RMMZ のバージョンを揃える

エンジンファイル（`js/rmmz_*.js` 等）は Git で管理していません。
**端末ごとに RMMZ のバージョンが異なると、動作が異なったりエラーが発生します。**

**対策:**
- 全端末で同じバージョンの RMMZ を使う
- RMMZ をアップデートする際は**全端末を同時に更新**する
- バージョンは下の「[RMMZ バージョン情報](#rmmz-バージョン情報)」に記録しておく

---

### ⚠️ 注意3: プラグインのバージョンと設定を揃える

`js/plugins.js`（プラグインの ON/OFF 設定）と `js/plugins/*.js`（プラグイン本体）は Git で管理されます。
ただし、**プラグインのパラメータ設定（RMMZ エディタ上で設定する値）は `js/plugins.js` に保存される**ため、このファイルの変更は必ずコミットしてください。

また、**有料プラグインや外部から入手したプラグイン**は著作権の関係で Git に含めていい場合と悪い場合があります：

**対策:**
- プラグインを追加・更新したら必ず `git add js/plugins/` と `git add js/plugins.js` をコミットする
- 別端末で `git pull` した後、RMMZ エディタでプラグインが正しく認識されているか確認する
- 著作権上 Git に含められないプラグインは、素材と同様にクラウドストレージで別管理する

---

### ⚠️ 注意4: 作業前に必ず `git pull` する

複数端末で作業する場合、**作業を始める前に必ず最新状態を取得**しないと、
変更が衝突（コンフリクト）して面倒なことになります。

```bash
# 作業開始前に必ず実行
git pull
```

**作業の流れ:**
```
端末A で編集 → commit → push
          ↓
端末B で pull → 編集 → commit → push
          ↓
端末A で pull → 編集 → ...
```

**やってはいけないこと:**
- pull せずに両方の端末で同じファイルを編集してコミットする（コンフリクトの原因）

---

### ⚠️ 注意5: RMMZエディタで保存すると複数ファイルが変更される

RMMZ エディタは保存時に関連するすべての JSON ファイルを書き換えます。
マップ1つ変更しただけでも、`System.json` や `MapInfos.json` が更新されることがあります。

**対策:**
- `git status` で変更されたファイルを確認してからコミットする
- 意図しないファイルが変更されていないかチェックする習慣をつける

```bash
git status          # 変更ファイルを確認
git diff data/      # 具体的な変更内容を確認してからステージング
git add data/
git commit -m "Map002: 村のマップを追加"
```

---

### ⚠️ 注意6: セーブデータは端末ローカルに保存される

ゲームのセーブデータ（テスト中の進行状況等）はブラウザのローカルストレージまたは
`save/` フォルダに保存されており、Git では管理されません。
**別端末ではセーブデータが引き継がれません。** これは仕様通りです。

---

### まとめ: 端末ごとに揃えなければいけないもの

| 項目 | 同期方法 | タイミング |
|---|---|---|
| ゲームデータ・プラグイン | Git（このリポジトリ） | `git pull` / `git push` |
| 素材（audio/img/effects） | クラウドストレージ等 | 素材を追加・変更したとき |
| エンジンファイル（js/libs 等） | RMMZ を同バージョンでインストール | RMMZ をインストール・更新するとき |
| フォント（fonts/） | RMMZ インストール先からコピー | RMMZ をインストールしたとき |

---

## 新しい端末へのセットアップ手順

新しい PC で作業を開始する場合の手順です。

### Step 1: 必要なソフトをインストール

- [ ] RPG Maker MZ（バージョンは「[RMMZ バージョン情報](#rmmz-バージョン情報)」を参照）
- [ ] Git

### Step 2: リポジトリをクローン

```bash
git clone https://github.com/showstarkm1129/RPGmaker.git "C:/Users/<ユーザー名>/Documents/RMMZ"
```

### Step 3: エンジンファイルを補完

RMMZ インストール先（例: `C:\Program Files\KADOKAWA\RPGMZ\`）の
`NewProject` フォルダから以下を各プロジェクトにコピーする：

```
js/rmmz_core.js
js/rmmz_managers.js
js/rmmz_objects.js
js/rmmz_scenes.js
js/rmmz_sprites.js
js/rmmz_windows.js
js/main.js
js/libs/         ← フォルダごとコピー
fonts/           ← フォルダごとコピー
```

### Step 4: 素材ファイルを補完

クラウドストレージ等のバックアップから以下を各プロジェクトにコピーする：

```
audio/           ← フォルダごとコピー
img/             ← フォルダごとコピー
effects/         ← フォルダごとコピー
```

### Step 5: 動作確認

RMMZ エディタでプロジェクトを開き、正常に表示されることを確認する。

---

## 日常のワークフロー

```bash
# 【作業開始時】最新の状態を取得（必須）
git pull

# --- RMMZ エディタで編集 ---

# 【作業終了時】変更内容を確認
git status

# 変更されたファイルをステージング
git add Test/data/
git add Test/js/plugins.js    # プラグイン設定を変更した場合

# コミット
git commit -m "Map002: 村のマップを追加"

# GitHub にプッシュ
git push
```

---

## 新規プロジェクト追加時

RMMZ で新プロジェクトを `C:\Users\<ユーザー名>\Documents\RMMZ\` 内に作成すれば、
`.gitignore` のワイルドカードパターン（`*/audio/` 等）が**自動的に**適用されます。

```bash
# 新プロジェクト（例: Game2）を追加
git add Game2/
git commit -m "Game2: 新プロジェクト追加"
git push
```

追加後は「[RMMZ バージョン情報](#rmmz-バージョン情報)」のテーブルにも記録してください。

---

## RMMZ バージョン情報

プロジェクトごとに使用している RMMZ バージョンを記録します。
複数端末でバージョンを揃えるための参照用です。

| プロジェクト | RMMZバージョン | 備考 |
|---|---|---|
| Test | 1.10.0 | |
